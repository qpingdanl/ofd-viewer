(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{435:function(t,a,h){"use strict";h.r(a),function(t){h.d(a,"startCheck",function(){return e});h(60),h(16);var n=h(433),o=h(38),r=h(446),c=h(227),i=h(445);function e(a){t(".fox-nav-second-highlight").click(function(t){Object(n.cleanEditEvent)(a),a.root.find(".fox-edit-main").removeClass("fox-edit-main-over");var e=a.state;e&&(e.editMode="highlight",Object(n.cleanCursor)(e.wrapper.parent()),e.wrapper.parent().addClass("fox-cursor-highlight"),Object(i.a)(a))}),t(".fox-nav-second-handWrite").click(function(t){Object(n.cleanEditEvent)(a);var e=a.state;e&&(e.editMode="handWrite",Object(n.cleanCursor)(e.wrapper.parent()),e.wrapper.parent().addClass("fox-cursor-handWrite"),Object(o.b)(a,"softpen",{color:"#000",lineWidth:6}))}),t(".fox-nav-second-eraser").click(function(t){Object(n.cleanEditEvent)(a);var e=a.state;e&&(e.editMode="eraser",Object(n.cleanCursor)(e.wrapper.parent()),e.wrapper.parent().addClass("fox-cursor-eraser"),Object(r.a)(a))}),t(".fox-nav-second-arrow").click(function(t){Object(n.cleanEditEvent)(a);var e=a.state;e&&(e.editMode="arrow",Object(n.cleanCursor)(e.wrapper.parent()),Object(c.a)(a))})}}.call(this,h(3))},445:function(t,e,a){"use strict";!function(P){a.d(e,"a",function(){return t});a(105),a(16),a(70),a(33),a(59),a(60);var k=a(38),C=a(88),f=a(441),g=a(73);function d(v,t,a,M){for(var w=v.state.PERDPI,m=[],e=0;e<t.length;e++){for(var n=t[e],o=n.index,r=(v.state.highlightPages[o]||(v.state.highlightPages[o]=[]),Object.create(null)),c=(r.index=o,r.content=[],0);c<n.content.length;c++)!function(){var e,t=n.content[c];Object(C.a)(t.loc,a)&&(e=t.pos.map(function(t){return Object(C.b)(t,w)}),v.state.highlightPages[o].some(function(t){return!!t&&t.path.some(function(t){return JSON.stringify(t)==JSON.stringify(e)})})||r.content.push(JSON.parse(JSON.stringify(t.pos))))}();m.push(r)}for(var O=[],j=0;j<m.length;j++)!function(){var t=m[j],e=t.index,t=t.content;if(t.length){O.push(e);for(var a=t.map(function(t){return t.map(function(t){return Object(C.b)(t,w)})}),n=(v.state.highlightPages[e].push({cid:null,ltwhc:null,path:a}),a[0][0]),o=a[0][0]+a[0][2],r=a[0][1],c=a[0][1]+a[0][3],i=0;i<a.length;i++)n=Math.min(n,a[i][0]),o=Math.max(o,a[i][0]+a[i][2]),r=Math.min(r,a[i][1]),c=Math.max(c,a[i][1]+a[i][3]);var h,t=Object.create(null),s=(t.left=n,t.top=r,t.width=o-n,t.height=c-r,t.color=M,v.state.highlightPages[e]),l=s.length-1,u=(s[l].ltwhc=t,s[l].cid="highlight"+l,Number(v.state.pages[e][0].getAttribute("data-ratio"))),p=v.state.rotation,x=t.left,f=t.top,g=t.width,d=t.height,t=Object(k.a)(v.state,e,t),y=t.ex,t=t.ey;switch(p){case 0:h="";break;case 90:h="translateY(".concat(-d*u,"px)");break;case 180:h="translateX(".concat(-g*u,"px) translateY(").concat(-d*u,"px)");break;case 270:h="translateX(".concat(-g*u,"px)")}var y=P('<canvas\n                class="fox-edit-little fox-highlight"\n                width='.concat(g*u," height=").concat(d*u,'\n                style="left:').concat(y,"px;top:").concat(t,"px;transform: rotate(").concat(p,"deg) ").concat(h,';"\n            />')).appendTo(v.state.pages[e]),b=y[0].getContext("2d");b.lineCap="round",b.strokeStyle=b.fillStyle=M,a.forEach(function(t){var e=(t[0]-x)*u,a=(t[1]-f)*u,n=t[2]*u,t=t[3]*u;b.fillRect(e,a,n,t)}),y[0].cid=s[l].cid}}();Object(g.a)(v.state,O,"highlightPages","after")}function t(p){var i=p.root.find(".fox-edit-main"),x=i[0];p.state.pages.forEach(function(t,e){t[0].onmousedown=function(t){t=t||event;if(0===t.button){for(var o=t.clientX,r=t.clientY,h=(i.addClass("fox-edit-main-over"),[]),s=Object(f.e)(p),l=p.state.rotation,u=0;u<s.length;u++)!function(){for(var t=s[u],e={index:t,content:[]},a=p.state.textPages[t],n=Number(p.state.pages[t][0].getAttribute("data-ratio")),o=p.state.pages[t][0].getBoundingClientRect(),r=0;r<a.length;r++){var c=JSON.parse(JSON.stringify(a[r])),i=(c.loc=c.pos.map(function(t){return Object(C.b)(t,p.state.PERDPI*n)}),[]);switch(l){case 0:i[0]=o.x+c.loc[0],i[1]=o.y+c.loc[1],i[2]=c.loc[2],i[3]=c.loc[3];break;case 90:i[0]=o.x+(o.width-c.loc[3]-c.loc[1]),i[1]=o.y+c.loc[0],i[2]=c.loc[3],i[3]=c.loc[2];break;case 180:i[0]=o.x+(o.width-c.loc[2]-c.loc[0]),i[1]=o.y+(o.height-c.loc[3]-c.loc[1]),i[2]=c.loc[2],i[3]=c.loc[3];break;case 270:i[0]=o.x+c.loc[1],i[1]=o.y+(o.height-c.loc[2]-c.loc[0]),i[2]=c.loc[3],i[3]=c.loc[2]}c.loc=i,e.content.push(c)}h.push(e)}();Object(g.a)(p.state,s,"highlightPages","before");var c="rgba(241, 141, 0, 0.3)";document.onmousemove=function(t){var e,a,n,t=t||event;0===t.button&&(n=t.clientX,t=t.clientY,Object(f.b)(x),Object(f.d)(x,{x1:o,y1:r},{x2:n,y2:t}),e=Math.min(o,n),a=Math.min(r,t),n=Math.abs(o-n),t=Math.abs(r-t),Object(f.c)(x,h,[e,a,n,t],c))},document.onmouseup=function(t){var e,a,n,t=t||event;0===t.button&&(document.onmousemove=document.onmouseup=null,i.removeClass("fox-edit-main-over"),n=t.clientX,t=t.clientY,Object(f.b)(x),e=Math.min(o,n),a=Math.min(r,t),n=Math.abs(o-n),t=Math.abs(r-t),d(p,h,[e,a,n,t],c))}}}})}}.call(this,a(3))},446:function(t,e,a){"use strict";!function(u){a.d(e,"a",function(){return t});a(226),a(70),a(16),a(59);var p=a(73),y=a(38);function j(t,e,a){return!(Math.abs(t-e)<1e-6||Math.abs(e-a)<1e-6)&&(t<e&&e<a||a<e&&e<t)}function P(t,e,a){for(var n=0;n<t.length;n++){var o=t[n];if(o&&o.x==e.x&&o.y==e.y){t.splice(n+1,0,a);break}}}function b(t,e){for(var a=JSON.parse(JSON.stringify(t)),n=a,o=10,r=e,c=0;c<n.length;c++){var i=n[c-1],h=n[c],s=n[c+1];h&&(i=!i||Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)<=Math.pow(o,2),h=!h||Math.pow(h.x-r.x,2)+Math.pow(h.y-r.y,2)<=Math.pow(o,2),s=!s||Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2)<=Math.pow(o,2),i)&&h&&s&&(n[c]=null)}for(var l=[],u=0;u<t.length-1;u++){var p,x,f,g,d,y,b,v,M=t[u],w=t[u+1];M&&w&&(x=w,b=10,p=e,v=void 0,g=[{},{}],(f=M).x==x.x&&f.y!=x.y?Math.abs(p.x-f.x)<b&&(v=Math.sqrt(b*b-(f.x-p.x)*(f.x-p.x)),g[0].x=f.x,g[0].y=p.y+v,g[1].x=f.x,g[1].y=p.y-v):f.y==x.y&&f.x==x.x?(g[0].x=f.x,g[0].y=f.y,g[1].x=x.x,g[1].y=x.y):f.y==x.y&&f.x!=x.x?Math.abs(p.y-f.y)<=b&&(v=Math.sqrt(b*b-(f.y-p.y)*(f.y-p.y)),g[0].x=p.x+v,g[0].y=f.y,g[1].x=p.x-v,g[1].y=f.y):(v=(x.y-f.y)/(x.x-f.x),f=x.y-v*x.x,0<(x=4*Math.pow(v*f-p.x-v*p.y,2)-4*(1+v*v)*(Math.pow(p.x,2)+Math.pow(f-p.y,2)-b*b))&&(b=2*(v*f-p.x-v*p.y),g[0].x=(-b+Math.sqrt(x))/(2*(1+v*v)),g[0].y=v*g[0].x+f,g[1].x=(-b-Math.sqrt(x))/(2*(1+v*v)),g[1].y=v*g[1].x+f)),p=g[0].x?g:null)&&(b=p[0].x,x=p[0].y,v=p[1].x,f=p[1].y,g=j(M.x,b,w.x)||j(M.y,x,w.y),d=j(M.x,v,w.x)||j(M.y,f,w.y),g&&d?(y=Math.abs(b-M.x)<Math.abs(v-M.x)||Math.abs(x-M.y)<Math.abs(f-M.y),Math.abs(b-M.x)>Math.abs(v-M.x)||(Math.abs(x-M.y),Math.abs(f-M.y)),y?(P(a,M,p[0]),P(a,p[0],p[1]),P(a,p[0],null)):(P(a,M,p[1]),P(a,p[1],p[0]),P(a,p[1],null))):g&&!d?(P(a,M,p[0]),Math.pow(M.x-e.x,2)+Math.pow(M.y-e.y,2)<=Math.pow(10,2)?l.push(M):Math.pow(w.x-e.x,2)+Math.pow(w.y-e.y,2)<=Math.pow(10,2)&&l.push(w)):!g&&d?(P(a,M,p[1]),Math.pow(M.x-e.x,2)+Math.pow(M.y-e.y,2)<=Math.pow(10,2)?l.push(M):Math.pow(w.x-e.x,2)+Math.pow(w.y-e.y,2)<=Math.pow(10,2)&&l.push(w)):g||d||(b=Math.pow(M.x-e.x,2)+Math.pow(M.y-e.y,2)<=Math.pow(10,2),v=Math.pow(w.x-e.x,2)+Math.pow(w.y-e.y,2)<=Math.pow(10,2),b&&v&&(l.push(M),l.push(w))))}for(u=0;u<l.length;u++)for(var m=l[u],O=0;O<a.length;O++)if((M=a[O])&&m.x==M.x&&m.y==M.y){a.splice(O,1,null);break}return function t(e){for(var a=!1,n=0;n<e.length-1;n++){var o=e[n],r=e[n+1];if(n==e.length-2&&(a=!0),null==o&&null==r){e.splice(n,1);break}}null==e[0]&&e.shift(),null==e[e.length-1]&&e.pop(),!a&&e.length&&t(e)}(a),a}function n(t,e,a,n){for(var o,r=n.ex,n=n.ey,c=e.cid,i=t.handWritePages[a],h=0;h<i.length;h++)if(i[h].cid==c){o=h;break}if(null!=o)for(var s=i[o].ltwhc,l=s.left,u=s.top,s=(s.width,s.height,s.color,Object(y.d)(t,a,{ex:r,ey:n})),r=s.x,n=s.y,s=Number(t.pages[a][0].getAttribute("data-ratio")),l=(r-l)*s,u=(n-u)*s,s=e.getContext("2d"),p=(s.save(),s.beginPath(),s.arc(10+l,10+u,10,0,2*Math.PI,!1),s.clip(),s.clearRect(0,0,e.width,e.height),s.closePath(),s.restore(),t),x=a,f={x:r,y:n},g=0;g<p.handWritePages[x].length;g++){var d=b(p.handWritePages[x][g].path,f);p.handWritePages[x][g].path=d}}function t(s){var l=!1;s.state.pages.forEach(function(a,h){a[0].onmousedown=function(t){var i=t||event;0===i.button&&(l=!0,Object(p.a)(s.state,[h],"handWritePages","before"),document.onmouseup=function(t){var e=s.state.handWritePages[h];if(e)for(var a=0;a<e.length;a++){var n=e[a].path;if(n.length)for(var o=0;o<n.length;o++){var r,c=n[o];c&&!c.t&&(r=n[o-1]||n[o+1],c.lineWidth=r.lineWidth)}else u(i.target).remove(),s.state.handWritePages[h][a]=void 0}l=!1,s.state.handWritePages[h]&&Object(p.a)(s.state,[h],"handWritePages","after"),document.onmouseup=null})},a.children(".fox-hand-write").each(function(){this.onmousemove=function(t){var e,t=t||event;0===t.button&&l&&(e=a[0].getBoundingClientRect(),n(s.state,this,h,{ex:t.clientX-e.x,ey:t.clientY-e.y}))}})})}}.call(this,a(3))}}]);